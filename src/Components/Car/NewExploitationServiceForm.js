import React, {useState} from 'react';
import axios from "axios";
import {useLocation,useNavigate } from "react-router-dom";
import {Card} from "react-bootstrap";


const NewExploitationServiceForm = () => {
    const navigate = useNavigate();
    const location = useLocation();
    const carId = location.state.carId;
    const [date, setDate] = useState('');
    const [course, setCourse] = useState('');
    const [oilChange, setOilChange] = useState(false);
    const [airFilterChange, setAirFilterChange] = useState(false);
    const [fuelFilterChange, setFuelFilterChange] = useState(false);
    const [cabinFilterChange, setCabinFilterChange] = useState(false);
    const titleColor=global.config.TileFontColor;
    const buttonColor=global.config.ButtonColor;
    const formBg=global.config.FormBackgroundColor;

    const formData = {
        carId,
        date,
        course,
        oilChange,
        airFilterChange,
        fuelFilterChange,
        cabinFilterChange
    };
    const handleSubmit = (e) => {
        e.preventDefault();
        axios.post(global.config.HostFront + '/api/cars/add-exploitation-repair', formData)
            .then(response => {
                // Handle success
                console.log(response);
                navigate(`/car-details`,{ state: {carId: carId}});

            })
            .catch(error => {
                // Handle error
                console.log(error);
            });
    };

    return (
        <Card style={{background: formBg}} >
            <h4 style={{color: titleColor}}> New Exploitation Service</h4>

                <form onSubmit={handleSubmit}>

                    <div className="form-group">
                        <label> Date:</label>
                        <input type="date" value={date} onChange={(e) => setDate(e.target.value)}/>
                    </div>

                    <div className="form-group">
                        <label> Course: </label>
                        <input type="text" value={course} onChange={(e) => setCourse(e.target.value)}/>
                    km</div>

                    <div className="form-group">
                        <label>Oil Change:</label>
                        <input type="checkbox" checked={oilChange}
                               onChange={(e) => setOilChange(e.target.checked)}/>
                    </div>

                    <div className="form-group">
                        <label> Air Filter Change:</label>
                        <input type="checkbox" checked={airFilterChange}
                               onChange={(e) => setAirFilterChange(e.target.checked)}/>
                    </div>

                    <div className="form-group">
                        <label> Fuel Filter Change:</label>
                        <input type="checkbox" checked={fuelFilterChange}
                               onChange={(e) => setFuelFilterChange(e.target.checked)}/>
                    </div>

                    <div className="form-group">
                        <label>Cabin Filter Change:</label>
                        <input type="checkbox" checked={cabinFilterChange}
                               onChange={(e) => setCabinFilterChange(e.target.checked)}/>
                    </div>

                    <button  type="submit" className={`btn ${buttonColor}`}>Submit</button>
                </form>


    </Card>
    );
};

export default NewExploitationServiceForm;