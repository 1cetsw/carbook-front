import React, {useState} from 'react';
import axios from "axios";
import {useLocation} from "react-router-dom";


const NewExploitationServiceForm = () => {
    const location = useLocation();
    const carId = location.state.carId;
    const [date, setDate] = useState('');
    const [course, setCourse] = useState('');
    const [oilChange, setOilChange] = useState(false);
    const [airFilterChange, setAirFilterChange] = useState(false);
    const [fuelFilterChange, setFuelFilterChange] = useState(false);
    const [cabinFilterChange, setCabinFilterChange] = useState(false);


    const formData = {
        carId,
        date,
        course,
        oilChange,
        airFilterChange,
        fuelFilterChange,
        cabinFilterChange
    };
    const handleSubmit = (e) => {
        e.preventDefault();
        axios.post(global.config.HostFront + '/api/cars/add-exploitation-repair', formData)
            .then(response => {
                // Handle success
                console.log(response);
                window.location.href = '/dashboard';
            })
            .catch(error => {
                // Handle error
                console.log(error);
            });
    };

    return (
        <div className="card shadow mb-4">
            <div className="card-header py-3">
                <h6 className="m-0 font-weight-bold text-primary">New Exploitation Service</h6>
            </div>

            <div className="card-body">
                <form onSubmit={handleSubmit}>

                    <div className="form-group">
                        <label> Date:</label>
                        <input type="date" value={date} onChange={(e) => setDate(e.target.value)}/>
                    </div>

                    <div className="form-group">
                        <label> Course: </label>
                        <input type="text" value={course} onChange={(e) => setCourse(e.target.value)}/>
                    </div>

                    <div className="form-group">
                        <label>Oil Change:</label>
                        <input type="checkbox" checked={oilChange}
                               onChange={(e) => setOilChange(e.target.checked)}/>
                    </div>

                    <div className="form-group">
                        <label> Air Filter Change:</label>
                        <input type="checkbox" checked={airFilterChange}
                               onChange={(e) => setAirFilterChange(e.target.checked)}/>
                    </div>

                    <div className="form-group">
                        <label> Fuel Filter Change:</label>
                        <input type="checkbox" checked={fuelFilterChange}
                               onChange={(e) => setFuelFilterChange(e.target.checked)}/>
                    </div>

                    <div className="form-group">
                        <label>Cabin Filter Change:</label>
                        <input type="checkbox" checked={cabinFilterChange}
                               onChange={(e) => setCabinFilterChange(e.target.checked)}/>
                    </div>

                    <button type="submit" className="btn btn-primary">Submit</button>
                </form>
            </div>
        </div>
    );
};

export default NewExploitationServiceForm;